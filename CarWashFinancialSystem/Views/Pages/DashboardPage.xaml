<Page x:Class="CarWashFinancialSystem.Views.Pages.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Аналитика"
      Loaded="Page_Loaded">

    <ScrollViewer>
        <StackPanel Margin="0,0,0,20">
            <!-- Header -->
            <StackPanel Margin="0,0,0,25">
                <TextBlock Text="Финансовая аналитика" Style="{StaticResource ModernHeaderText}"/>
                <TextBlock Text="Ключевые показатели эффективности бизнеса" Style="{StaticResource ModernBodyText}"/>
            </StackPanel>

            <!-- Период -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,15">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Отчёт за:" Style="{StaticResource ModernBodyText}" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <DatePicker x:Name="ReportDatePicker" SelectedDate="{Binding Mode=OneWay}" Margin="0,0,15,0"/>
                    <Button Content="🔄 Обновить" Style="{StaticResource ModernActionButtonStyle}" Click="RefreshData_Click"/>
                </StackPanel>
            </Border>

            <!-- Основные финансовые показатели -->
            <TextBlock Text="ОСНОВНЫЕ ПОКАЗАТЕЛИ" Style="{StaticResource ModernBodyText}" 
                       Margin="0,0,0,10" FontSize="11" Opacity="0.6"/>

            <UniformGrid Columns="3" Margin="0,0,-15,-15">
                <!-- Доходы -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="💰 ВЫРУЧКА" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="RevenueText" Text="0 ₽" FontSize="24" FontWeight="Bold" Foreground="#4CAF50"/>
                        <TextBlock Text="общий доход" Style="{StaticResource ModernBodyText}" Opacity="0.7"/>
                    </StackPanel>
                </Border>

                <!-- Расходы -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="📉 РАСХОДЫ" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="ExpensesText" Text="0 ₽" FontSize="24" FontWeight="Bold" Foreground="#F44336"/>
                        <TextBlock Text="общие затраты" Style="{StaticResource ModernBodyText}" Opacity="0.7"/>
                    </StackPanel>
                </Border>

                <!-- Прибыль -->
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="💵 ПРИБЫЛЬ" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="ProfitText" Text="0 ₽" FontSize="24" FontWeight="Bold" Foreground="#FF9800"/>
                        <TextBlock x:Name="ProfitMarginText" Text="0%" Style="{StaticResource ModernBodyText}" Opacity="0.7"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- Детализация расходов -->
            <TextBlock Text="СТРУКТУРА РАСХОДОВ" Style="{StaticResource ModernBodyText}" 
                       Margin="0,25,0,10" FontSize="11" Opacity="0.6"/>

            <UniformGrid Columns="4" Margin="0,0,-15,-15">
                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="💧 Вода" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="WaterExpenseText" Text="0 ₽" FontSize="16" FontWeight="Bold" Foreground="#2196F3"/>
                        <TextBlock x:Name="WaterPerCarText" Text="0 ₽/авто" Style="{StaticResource ModernBodyText}" Opacity="0.7" FontSize="11"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="⚡ Электричество" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="ElectricityExpenseText" Text="0 ₽" FontSize="16" FontWeight="Bold" Foreground="#FFC107"/>
                        <TextBlock x:Name="ElectricityPerCarText" Text="0 ₽/авто" Style="{StaticResource ModernBodyText}" Opacity="0.7" FontSize="11"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="🔥 Отопление" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="HeatingExpenseText" Text="0 ₽" FontSize="16" FontWeight="Bold" Foreground="#FF5722"/>
                    </StackPanel>
                </Border>

                <Border Style="{StaticResource ModernCardStyle}">
                    <StackPanel>
                        <TextBlock Text="👥 Зарплаты" Style="{StaticResource ModernBodyText}" Margin="0,0,0,8"/>
                        <TextBlock x:Name="SalaryExpenseText" Text="0 ₽" FontSize="16" FontWeight="Bold" Foreground="#9C27B0"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <!-- Статистика услуг -->
            <Border Style="{StaticResource ModernCardStyle}" Margin="0,25,0,0">
                <StackPanel>
                    <TextBlock Text="📊 СТАТИСТИКА УСЛУГ" Style="{StaticResource ModernSubheaderText}" Margin="0,0,0,15"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0">
                            <TextBlock Text="Количество услуг:" Style="{StaticResource ModernBodyText}" Margin="0,0,0,5"/>
                            <TextBlock x:Name="ServicesCountText" Text="0" FontSize="18" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}"/>

                            <TextBlock Text="Средний чек:" Style="{StaticResource ModernBodyText}" Margin="0,15,0,5"/>
                            <TextBlock x:Name="AverageCheckText" Text="0 ₽" FontSize="18" FontWeight="Bold" Foreground="{StaticResource PrimaryBrush}"/>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <TextBlock Text="Популярные услуги:" Style="{StaticResource ModernBodyText}" Margin="0,0,0,5"/>
                            <TextBlock x:Name="PopularServiceText" Text="-" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource TextPrimaryBrush}"/>
                            <TextBlock x:Name="PopularServiceCountText" Text="" Style="{StaticResource ModernBodyText}" Opacity="0.7"/>
                        </StackPanel>
                    </Grid>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</Page>